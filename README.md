# 라즈베리파이를 활용한 간단한 IoT 시스템
이 프로젝트는 센서(라즈베리파이), 서버, 클라이언트가 서로 HTTP 프로토콜을 기반으로 통신을 주고 받는 IoT 시스템이다. 시스템의 기능은 다음과 같다.
- 다수의 클라이언트를 처리할 수 있는 멀티 쓰레딩 메인 서버
- 라즈베리파이를 활용하여 온습도를 측정한 후 데이터베이스에 저장하는 기능
- 임계치 값을 초과한 온습도가 전달되면 사용자에게 알람을 보내는 기능
- 사용자의 명령어를 통해 저장된 온습도 정보를 데이터베이스에서 가져와 보여주는 기능

## 개발 기간 및 환경
- 기간: 2017.09 ~ 2017.11
- OS: Linux Ubuntu(VirtualBox)
- Language: C
- Tag: ```Mysql```, ```HTTP```, ```Raspberry-Pi```, ```socket```, ```Multi-thread```, ```Multi-process```

## 개발 내용
- Main server(server.c): 임의의 클라이언트의 요청을 처리하는 중에도 임계치를 초과할 때 발생하는 알람 클라이언트 요청은 그 즉시 동작해야 하므로 멀티 프로세스로 구현하였다. 알람 클라이언트를 제외한 다른 클라이언트가 여러 개로 한 번에 들어오는 것을 고려하여 이는 멀티 쓰레드로 구현하였다.
- Pi client: 서버에 post 요청을 보내는 클라이언트로 라즈베리파이 센서에서 온도와 습도를 읽어 해당 데이터를 서버로 보낸다.(post client 는 온도와 습도를 사용자가 직접 입력한 데이터를 서버에 보내는 형태로 구현되어 있다.)
- Get client: 서버에 get 요청을 보내는 클라이언트로 사용자로부터 명령어를 입력받아 데이터베이스에 저장되어 있는 온습도 정보를 받아서 화면에 출력한다.
- Push client: Pi client 에서 보낸 온도와 습도 데이터를 서버와 함께 받으며, 이 데이터가 임계치 값보다 크다면 push server 로 알람을 보낸다.

## 시스템 구조

![system structure](https://user-images.githubusercontent.com/34755287/50805381-7219d200-1335-11e9-8beb-f86ed4c1b31d.JPG)
